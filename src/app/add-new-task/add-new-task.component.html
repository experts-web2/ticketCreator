<div class="new-task-popup-container">
    <div class="head">
            <h1 mat-dialog-title>Add Contribution</h1>
    <button class="close" tabindex="-1" mat-button (click)="close()">X</button>
    </div>
    <form   [formGroup]="newTask">
        <div mat-dialog-content>
          <div class="text-center">
          </div>
          <div class="row">
                <!-- <mat-form-field> -->
                    <div class="col-md-4 col-12 d-flex flex-row ">
                        <div class="d-flex flex-column flex-grow-1 align-items-start">
                            <mat-label>Date</mat-label>
                            <input  [matDatepicker]="date" name="created"  placeholder="Choose a date" formControlName="dueDate" required/>
                            <span *ngIf="newTaskFormControl['dueDate'].invalid && (newTaskFormControl['dueDate'].dirty || newTaskFormControl['dueDate'].touched)" class="alert alert-danger">Due date is required</span>
                        </div>
                        <mat-datepicker-toggle class="mt-4" id="puple-icon" matSuffix [for]="date"></mat-datepicker-toggle>
                        <mat-datepicker #date></mat-datepicker>
                        

                    </div>
                    <div class="col-md-4 col-12">
                        <mat-checkbox class="example-margin mt-4">Project Date Filter 30+/-</mat-checkbox>
                    </div>
                  <!-- </mat-form-field> -->
                  <div class="col-md-4 col-12">
                        <mat-label>Created By</mat-label>
                        <input type="text"
                            placeholder="Proj Manager"
                            aria-label="Number"
                            matInput
                            [matAutocomplete]="auto" formControlName="projManager" [value]="newTask.value.projManager.name">
                            <span *ngIf="newTaskFormControl['projManager'].invalid && (newTaskFormControl['projManager'].dirty || newTaskFormControl['projManager'].touched)" class="alert alert-danger">Name of creator required</span>

                        <mat-autocomplete #auto="matAutocomplete">
                            <!-- <mat-option  > </mat-option> -->
                        <mat-option *ngFor="let mgr of projMgr" [value]="mgr" > 
                            {{mgr.name}}
                        </mat-option>
                        </mat-autocomplete>
                 </div>
            
            <div class="col-md-4 col-12">
                  <mat-label>Client</mat-label>
                  <mat-select formControlName="client">
                    <!-- <mat-option value="0" disabled>Select one</mat-option> -->
                    <mat-option placeholder="Client" *ngFor="let client of cLients" [value]="client">
                      {{client.name}}
                      </mat-option>
                  </mat-select>
                  <span *ngIf="newTaskFormControl['client'].invalid && (newTaskFormControl['client'].dirty || newTaskFormControl['client'].touched)" class="alert alert-danger">Client Name required</span>

              </div>
                <div class=" col-12 d-flex flex-row">
                    <!-- <mat-form-field> -->
                        <div class="d-flex flex-column flex-grow-1 align-items-start">
                      <mat-label>project</mat-label>
                      <mat-label></mat-label>
                      <input matInput placeholder="Project"  formControlName='projFile'/>
                      <span *ngIf="newTaskFormControl['projFile'].invalid && (newTaskFormControl['projFile'].dirty || newTaskFormControl['projFile'].touched)" class="alert alert-danger">Project required</span>

                    </div>
                  <!-- </mat-form-field> -->
                  <button mat-button  ><mat-icon>folder_open</mat-icon></button>
                  </div>
                  <div class=" col-12 d-flex flex-row">
                      <!-- <mat-form-field> -->
                        <div class="d-flex flex-column flex-grow-1 align-items-start">
                        <mat-label>Task</mat-label>
                        <input matInput placeholder="Task" [readonly]="taskActive"  formControlName='task'/>
                        <span *ngIf="newTaskFormControl['task'].invalid && (newTaskFormControl['task'].dirty || newTaskFormControl['task'].touched)" class="alert alert-danger">Task detail required</span>

                    </div>
                    <!-- </mat-form-field> -->
                    <button mat-button  (click)="valueChange()"><mat-icon>edit</mat-icon></button>
                    </div>
              
                <div class="col-md-4 col-12">
                    <mat-label>Status</mat-label>
                    <mat-select formControlName="status">
                      <!-- <mat-option value="0" disabled>Select one</mat-option> -->
                      <mat-option *ngFor="let state of Status" [value]="state">
                        {{state}}
                        </mat-option>
                    </mat-select>
                    <span *ngIf="newTaskFormControl['status'].invalid && (newTaskFormControl['status'].dirty || newTaskFormControl['status'].touched)" class="alert alert-danger">Status feild required</span>

                </div>
                <div class="col-md-4 col-12">
                    <!-- <mat-form-field> -->
                      <mat-label>Assignee</mat-label>
                      <mat-select formControlName="asignee">
                        <!-- <mat-option value="0" disabled>Select one</mat-option> -->
                        <mat-option *ngFor="let assignee of assignees" [value]="assignee">
                          {{assignee.name}}
                          </mat-option>
                      </mat-select>
                      <span *ngIf="newTaskFormControl['asignee'].invalid && (newTaskFormControl['asignee'].dirty || newTaskFormControl['asignee'].touched)" class="alert alert-danger">Assignee name required</span>

                      

                      <!-- </mat-form-field> -->
                  </div>
                  <div class="col-md-4 col-12">
                    <mat-checkbox class="example-margin mt-4">Send Email</mat-checkbox>
                  </div>
                <div class="col-md-4 col-12">
                    <mat-label>Task Type</mat-label>
                    <mat-select formControlName="taskType">
                      <!-- <mat-option value="0" disabled>Select one</mat-option> -->
                      <mat-option *ngFor="let taskType of taskTypes" [value]="taskType">
                        {{taskType}}
                        </mat-option>
                    </mat-select>
                    <span *ngIf="newTaskFormControl['taskType'].invalid && (newTaskFormControl['taskType'].dirty || newTaskFormControl['taskType'].touched)" class="alert alert-danger">Task Type required</span>

                </div>
                <div class="col-md-4 col-12">
                    <mat-label>Priority</mat-label>
                    <mat-select formControlName="priority">
                      <!-- <mat-option value="0" disabled>Select one</mat-option> -->
                      <mat-option *ngFor="let priorityType of priorityTypes" [value]="priorityType">
                        {{priorityType}}
                        </mat-option>
                    </mat-select>
                    <span *ngIf="newTaskFormControl['priority'].invalid && (newTaskFormControl['priority'].dirty || newTaskFormControl['priority'].touched)" class="alert alert-danger">Priority feild required</span>


                </div>
                <div class="w-100"></div>

            
            
            <div class="col-md-6 col-12">
              <!-- <mat-form-field> -->
              
                <mat-label>Notes</mat-label>
                <textarea  formControlName="notes"></textarea>
                <span *ngIf="newTaskFormControl['notes'].invalid && (newTaskFormControl['notes'].dirty || newTaskFormControl['notes'].touched)" class="alert alert-danger">Notes required</span>

              <!-- </mat-form-field> -->
            </div>
            <div class="col-md-6 col-12">
              <!-- <mat-form-field> -->
                <mat-label>Email Notes</mat-label>
                <textarea  formControlName="emailnotes"></textarea>
                <span *ngIf="newTaskFormControl['emailnotes'].invalid && (newTaskFormControl['emailnotes'].dirty || newTaskFormControl['emailnotes'].touched)" class="alert alert-danger">Email Notes required</span>

              <!-- </mat-form-field> -->
            </div>
          </div>
         
        </div>
        <div mat-dialog-actions>
          <button class="Save-and-add-btn" mat-button (click)="save()">Save & Add Task</button>
          <button class="Save-and-add-btn" mat-button (click)="save()">Save & Add Pitch/Hit</button>
          <button class="cancel-btn" mat-button (click)="close()">Cancel</button>
          <button class="save-btn" mat-button  (click)="save()">Save</button>
        </div>
    </form> 

</div>